<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 可解释机器学习与因果推断 | Data Science in R</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 可解释机器学习与因果推断 | Data Science in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 可解释机器学习与因果推断 | Data Science in R" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="米霖" />


<meta name="date" content="2023-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="流程挖掘.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science In R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like https://bookdown.org/yihui/bookdown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#r语言与数据科学"><i class="fa fa-check"></i><b>1.1</b> R语言与数据科学</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#作者其他书籍"><i class="fa fa-check"></i><b>1.2</b> 作者其他书籍</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html"><i class="fa fa-check"></i><b>2</b> R语言与数据科学</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#数据科学简介"><i class="fa fa-check"></i><b>2.1</b> 数据科学简介</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#数据科学的关键元素"><i class="fa fa-check"></i><b>2.1.1</b> 数据科学的关键元素：</a></li>
<li class="chapter" data-level="2.1.2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#数据科学的应用领域"><i class="fa fa-check"></i><b>2.1.2</b> 数据科学的应用领域：</a></li>
<li class="chapter" data-level="2.1.3" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#数据科学工具和编程语言"><i class="fa fa-check"></i><b>2.1.3</b> 数据科学工具和编程语言：</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r语言的重要性"><i class="fa fa-check"></i><b>2.2</b> R语言的重要性</a></li>
<li class="chapter" data-level="2.3" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r和rstudio的安装"><i class="fa fa-check"></i><b>2.3</b> R和RStudio的安装</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#步骤一安装r语言"><i class="fa fa-check"></i><b>2.3.1</b> 步骤一：安装R语言</a></li>
<li class="chapter" data-level="2.3.2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#步骤二安装rstudio"><i class="fa fa-check"></i><b>2.3.2</b> 步骤二：安装RStudio</a></li>
<li class="chapter" data-level="2.3.3" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#步骤三配置rstudio"><i class="fa fa-check"></i><b>2.3.3</b> 步骤三：配置RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#包管理"><i class="fa fa-check"></i><b>2.4</b> 包管理</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#安装r包"><i class="fa fa-check"></i><b>2.4.1</b> 安装R包：</a></li>
<li class="chapter" data-level="2.4.2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#加载r包"><i class="fa fa-check"></i><b>2.4.2</b> 加载R包：</a></li>
<li class="chapter" data-level="2.4.3" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#查看已安装的包"><i class="fa fa-check"></i><b>2.4.3</b> 查看已安装的包：</a></li>
<li class="chapter" data-level="2.4.4" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#更新r包"><i class="fa fa-check"></i><b>2.4.4</b> 更新R包：</a></li>
<li class="chapter" data-level="2.4.5" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#移除r包"><i class="fa fa-check"></i><b>2.4.5</b> 移除R包：</a></li>
<li class="chapter" data-level="2.4.6" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#包的搜索路径"><i class="fa fa-check"></i><b>2.4.6</b> 包的搜索路径：</a></li>
<li class="chapter" data-level="2.4.7" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#版本控制"><i class="fa fa-check"></i><b>2.4.7</b> 版本控制：</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r语言基本语法"><i class="fa fa-check"></i><b>2.5</b> R语言基本语法</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#变量与数据类型"><i class="fa fa-check"></i><b>2.5.1</b> 变量与数据类型</a></li>
<li class="chapter" data-level="2.5.2" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#数据结构"><i class="fa fa-check"></i><b>2.5.2</b> 数据结构</a></li>
<li class="chapter" data-level="2.5.3" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#控制结构"><i class="fa fa-check"></i><b>2.5.3</b> 控制结构</a></li>
<li class="chapter" data-level="2.5.4" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#子集选取"><i class="fa fa-check"></i><b>2.5.4</b> 子集选取</a></li>
<li class="chapter" data-level="2.5.5" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r语言面向对象系统"><i class="fa fa-check"></i><b>2.5.5</b> R语言面向对象系统</a></li>
<li class="chapter" data-level="2.5.6" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#防御式编程和异常处理"><i class="fa fa-check"></i><b>2.5.6</b> 防御式编程和异常处理</a></li>
<li class="chapter" data-level="2.5.7" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#函数式编程"><i class="fa fa-check"></i><b>2.5.7</b> 函数式编程</a></li>
<li class="chapter" data-level="2.5.8" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#泛函"><i class="fa fa-check"></i><b>2.5.8</b> 泛函</a></li>
<li class="chapter" data-level="2.5.9" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r语言函数运算符"><i class="fa fa-check"></i><b>2.5.9</b> R语言函数运算符</a></li>
<li class="chapter" data-level="2.5.10" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r语言非标准计算"><i class="fa fa-check"></i><b>2.5.10</b> R语言非标准计算</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="r语言与数据科学-1.html"><a href="r语言与数据科学-1.html#r包开发"><i class="fa fa-check"></i><b>2.6</b> R包开发</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html"><i class="fa fa-check"></i><b>3</b> R 语言数据分析</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#数据导入和导出"><i class="fa fa-check"></i><b>3.1</b> 数据导入和导出</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#数据读取"><i class="fa fa-check"></i><b>3.1.1</b> 数据读取</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#数据导出"><i class="fa fa-check"></i><b>3.1.2</b> 数据导出</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#r-语言数据处理"><i class="fa fa-check"></i><b>3.2</b> R 语言数据处理</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#缺失值处理"><i class="fa fa-check"></i><b>3.2.1</b> 缺失值处理</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#r异常值处理"><i class="fa fa-check"></i><b>3.2.2</b> R异常值处理</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#r探索性数据分析"><i class="fa fa-check"></i><b>3.3</b> R探索性数据分析</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#autoeda"><i class="fa fa-check"></i><b>3.3.1</b> AutoEDA</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#r-语言数据可视化"><i class="fa fa-check"></i><b>3.3.2</b> R 语言数据可视化</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#r语言统计推断"><i class="fa fa-check"></i><b>3.4</b> R语言统计推断</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#方差分析"><i class="fa fa-check"></i><b>3.4.1</b> 方差分析</a></li>
<li class="chapter" data-level="3.4.2" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#非参数检验"><i class="fa fa-check"></i><b>3.4.2</b> 非参数检验</a></li>
<li class="chapter" data-level="3.4.3" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#回归"><i class="fa fa-check"></i><b>3.4.3</b> 回归</a></li>
<li class="chapter" data-level="3.4.4" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#生存分析"><i class="fa fa-check"></i><b>3.4.4</b> 生存分析</a></li>
<li class="chapter" data-level="3.4.5" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#多重比较校正"><i class="fa fa-check"></i><b>3.4.5</b> 多重比较校正</a></li>
<li class="chapter" data-level="3.4.6" data-path="r-语言数据分析.html"><a href="r-语言数据分析.html#功效分析"><i class="fa fa-check"></i><b>3.4.6</b> 功效分析</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-常用包总结.html"><a href="r-常用包总结.html"><i class="fa fa-check"></i><b>4</b> R 常用包总结</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-常用包总结.html"><a href="r-常用包总结.html#dplyr-包"><i class="fa fa-check"></i><b>4.1</b> dplyr 包</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="r-常用包总结.html"><a href="r-常用包总结.html#主要函数"><i class="fa fa-check"></i><b>4.1.1</b> 主要函数：</a></li>
<li class="chapter" data-level="4.1.2" data-path="r-常用包总结.html"><a href="r-常用包总结.html#案例"><i class="fa fa-check"></i><b>4.1.2</b> 案例</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="r-常用包总结.html"><a href="r-常用包总结.html#tidyr-包"><i class="fa fa-check"></i><b>4.2</b> tidyr 包</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="r-常用包总结.html"><a href="r-常用包总结.html#主要函数-1"><i class="fa fa-check"></i><b>4.2.1</b> 主要函数：</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-常用包总结.html"><a href="r-常用包总结.html#例子"><i class="fa fa-check"></i><b>4.2.2</b> 例子</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r-常用包总结.html"><a href="r-常用包总结.html#stringr"><i class="fa fa-check"></i><b>4.3</b> stringr</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="r-常用包总结.html"><a href="r-常用包总结.html#主要函数-2"><i class="fa fa-check"></i><b>4.3.1</b> 主要函数：</a></li>
<li class="chapter" data-level="4.3.2" data-path="r-常用包总结.html"><a href="r-常用包总结.html#例子-1"><i class="fa fa-check"></i><b>4.3.2</b> 例子</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="r-常用包总结.html"><a href="r-常用包总结.html#lubridate"><i class="fa fa-check"></i><b>4.4</b> lubridate</a></li>
<li class="chapter" data-level="4.5" data-path="r-常用包总结.html"><a href="r-常用包总结.html#purrr"><i class="fa fa-check"></i><b>4.5</b> purrr</a></li>
<li class="chapter" data-level="4.6" data-path="r-常用包总结.html"><a href="r-常用包总结.html#forcats"><i class="fa fa-check"></i><b>4.6</b> forcats</a></li>
<li class="chapter" data-level="4.7" data-path="r-常用包总结.html"><a href="r-常用包总结.html#httr"><i class="fa fa-check"></i><b>4.7</b> httr</a></li>
<li class="chapter" data-level="4.8" data-path="r-常用包总结.html"><a href="r-常用包总结.html#rlang"><i class="fa fa-check"></i><b>4.8</b> rlang</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="监督学习.html"><a href="监督学习.html"><i class="fa fa-check"></i><b>5</b> 监督学习</a>
<ul>
<li class="chapter" data-level="5.1" data-path="监督学习.html"><a href="监督学习.html#决策树"><i class="fa fa-check"></i><b>5.1</b> 决策树</a></li>
<li class="chapter" data-level="5.2" data-path="监督学习.html"><a href="监督学习.html#随机森林"><i class="fa fa-check"></i><b>5.2</b> 随机森林</a></li>
<li class="chapter" data-level="5.3" data-path="监督学习.html"><a href="监督学习.html#xgboost"><i class="fa fa-check"></i><b>5.3</b> Xgboost</a></li>
<li class="chapter" data-level="5.4" data-path="监督学习.html"><a href="监督学习.html#特征选择"><i class="fa fa-check"></i><b>5.4</b> 特征选择</a></li>
<li class="chapter" data-level="5.5" data-path="监督学习.html"><a href="监督学习.html#深度学习"><i class="fa fa-check"></i><b>5.5</b> 深度学习</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html"><i class="fa fa-check"></i><b>6</b> 无监督学习与自然语言</a>
<ul>
<li class="chapter" data-level="6.1" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html#k-均值聚类"><i class="fa fa-check"></i><b>6.1</b> K 均值聚类</a></li>
<li class="chapter" data-level="6.2" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html#层次聚类"><i class="fa fa-check"></i><b>6.2</b> 层次聚类</a></li>
<li class="chapter" data-level="6.3" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html#dbscan"><i class="fa fa-check"></i><b>6.3</b> DBSCAN</a></li>
<li class="chapter" data-level="6.4" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html#自然语言处理"><i class="fa fa-check"></i><b>6.4</b> 自然语言处理</a></li>
<li class="chapter" data-level="6.5" data-path="无监督学习与自然语言.html"><a href="无监督学习与自然语言.html#时间序列"><i class="fa fa-check"></i><b>6.5</b> 时间序列</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="流程挖掘.html"><a href="流程挖掘.html"><i class="fa fa-check"></i><b>7</b> 流程挖掘</a>
<ul>
<li class="chapter" data-level="7.1" data-path="流程挖掘.html"><a href="流程挖掘.html#流程发现"><i class="fa fa-check"></i><b>7.1</b> 流程发现</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="可解释机器学习与因果推断.html"><a href="可解释机器学习与因果推断.html"><i class="fa fa-check"></i><b>8</b> 可解释机器学习与因果推断</a>
<ul>
<li class="chapter" data-level="8.1" data-path="可解释机器学习与因果推断.html"><a href="可解释机器学习与因果推断.html#可解释机器学习"><i class="fa fa-check"></i><b>8.1</b> 可解释机器学习</a></li>
<li class="chapter" data-level="8.2" data-path="可解释机器学习与因果推断.html"><a href="可解释机器学习与因果推断.html#因果推断"><i class="fa fa-check"></i><b>8.2</b> 因果推断</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="可解释机器学习与因果推断.html"><a href="可解释机器学习与因果推断.html#因果推断起源"><i class="fa fa-check"></i><b>8.2.1</b> 因果推断起源</a></li>
<li class="chapter" data-level="8.2.2" data-path="可解释机器学习与因果推断.html"><a href="可解释机器学习与因果推断.html#因果推断介绍"><i class="fa fa-check"></i><b>8.2.2</b> 因果推断介绍</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="可解释机器学习与因果推断" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> 可解释机器学习与因果推断<a href="可解释机器学习与因果推断.html#可解释机器学习与因果推断" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="可解释机器学习" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> 可解释机器学习<a href="可解释机器学习与因果推断.html#可解释机器学习" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>可解释机器学习（Interpretable Machine Learning，IML）是一种机器学习方法，旨在使机器学习模型的预测结果更易于理解、解释和解释给非技术人员。可解释性对于许多应用程序非常重要，特别是在医疗、金融、司法等领域，因为模型的决策需要透明和可解释。</p>
<ol style="list-style-type: decimal">
<li>可解释性的重要性：</li>
</ol>
<ul>
<li><p>透明性：可解释的模型使决策更透明。用户可以了解模型是如何做出预测的，从而更容易接受和信任模型的结果。</p></li>
<li><p>合规性：某些行业和法规要求机器学习模型的决策必须是可解释的，以确保公平性和合规性。</p></li>
<li><p>错误诊断：可解释的模型使用户能够更容易诊断模型的错误和不确定性，从而改进和调整模型。</p></li>
<li><p>沟通：可解释的模型有助于有效的沟通，特别是在与非技术人员、决策者和利益相关者交流时。</p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>可解释性的方法：</p></li>
<li><p>特征重要性分析：分析模型中各个特征的重要性，例如通过特征重要性图表或特征影响度量。</p></li>
<li><p>局部解释：解释单个预测结果，以了解特定案例的决策过程。局部解释方法包括LIME（Local Interpretable Model-agnostic Explanations）和SHAP（SHapley Additive exPlanations）。</p></li>
<li><p>全局解释：分析整个模型的决策规则，例如决策树的可视化或线性回归系数。</p></li>
</ol>
<p>参考:</p>
<ol style="list-style-type: decimal">
<li><a href="https://rpubs.com/liam/DrWhy" class="uri">https://rpubs.com/liam/DrWhy</a> 一些可解释机器学习相关的包</li>
<li><a href="https://rpubs.com/liam/interpretableMachineLearning" class="uri">https://rpubs.com/liam/interpretableMachineLearning</a> 一个标价好的总结</li>
<li><a href="https://rpubs.com/liam/interpretable" class="uri">https://rpubs.com/liam/interpretable</a> 简单的介绍</li>
<li><a href="https://rpubs.com/liam/rSAFE" class="uri">https://rpubs.com/liam/rSAFE</a> rsafe 自动特征提取，rSAFE软件可用于对复杂模型提取特征，然后用于拟合更简单的可解释模型，提高其整体性能。</li>
<li><a href="https://rpubs.com/liam/974914" class="uri">https://rpubs.com/liam/974914</a> 模型验证和误差分析auditor，提供了一些指标和模型结果可视化的函数</li>
</ol>
</div>
<div id="因果推断" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> 因果推断<a href="可解释机器学习与因果推断.html#因果推断" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="因果推断起源" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> 因果推断起源<a href="可解释机器学习与因果推断.html#因果推断起源" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>因果推断的概念和方法起源于统计学和哲学领域，其历史可以追溯到数百年前。以下是因果推断的起源和重要事件：</p>
<p>大卫·休谟的因果理论（18世纪）：苏格兰哲学家大卫·休谟提出了因果关系的基本概念，并认为因果关系是基于我们观察到的事件的经验联系建立的。他强调了我们无法直接观察到因果关系，而只能通过观察相关性来推断。</p>
<p>费舍尔的统计因果推断（20世纪）：英国统计学家罗纳德·费舍尔在20世纪中叶对因果推断做出了重要贡献。他提出了随机化实验的概念，其中处理组和对照组被随机分配，以减少混杂性和建立因果关系。</p>
<p>尼尔·伯克斯的潜在因果模型（20世纪）：统计学家尼尔·伯克斯提出了潜在因果模型的概念，用于描述观察数据中的因果关系。这个模型强调了观察数据中的因果关系可能受到未观察到的潜在变量的影响。</p>
<p>高级计量经济学的兴起（20世纪）：因果推断在经济学领域得到了广泛应用，特别是在计量经济学中。经济学家们开发了许多因果推断方法，以研究经济和社会现象。</p>
<p>贝叶斯网络和因果图（20世纪后期）：贝叶斯网络和因果图成为了因果推断的重要工具，它们用于可视化和建模因果关系。这些工具在计算机科学、人工智能和统计学中得到广泛应用。</p>
<p>现代因果推断（21世纪）：随着大数据时代的到来，因果推断变得更加复杂和多样化。研究人员开发了新的因果分析方法，以应对复杂的数据和研究问题，包括处理混杂性、时间序列分析、匹配设计和贝叶斯统计等。</p>
<p>因果推断的起源和发展是一个跨学科的过程，它融合了统计学、哲学、经济学、计算机科学等多个领域的知识和方法。因果推断方法的不断发展和演化使我们能够更好地理解和解释事物之间的因果关系。</p>
</div>
<div id="因果推断介绍" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> 因果推断介绍<a href="可解释机器学习与因果推断.html#因果推断介绍" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>因果推断是统计学和数据科学领域中的一个重要概念，用于确定两个或多个变量之间的因果关系，而不仅仅是相关性。 因果推断的核心思想是要确定一个事件（原因）是否导致了另一个事件（结果）。为了实现因果推断，通常需要满足以下条件：</p>
<ol style="list-style-type: decimal">
<li><p>因果关系：存在一个因果关系，即一个事件引起了另一个事件。这不仅是相关性，而是一个事件导致了另一个事件的变化。</p></li>
<li><p>时间顺序：原因在结果之前发生。原因发生在结果之后的情况不能用于因果推断。</p></li>
<li><p>排除其他影响因素：必须排除其他可能影响结果的因素，以便将原因归因于结果。</p></li>
</ol>
<p>因果推断的方法包括以下几种：</p>
<ol style="list-style-type: decimal">
<li><p>随机化实验：通过随机分配处理和对照组，来消除其他潜在的因果因素，以确定处理组和对照组之间的因果关系。</p></li>
<li><p>自然实验：利用自然界中已经存在的事件，如地震、政策变化等，来研究因果关系。</p></li>
<li><p>倾向评分匹配：通过将处理组的观测值与对照组的观测值进行匹配，来减小混杂性，从而进行因果推断。</p></li>
<li><p>工具变量：使用一个工具变量，它与处理组相关，但与结果无关，来进行因果分析。</p></li>
<li><p>因果图：通过构建因果图来表示变量之间的因果关系，可以进行因果推断。</p></li>
</ol>
<p>因果推断在医学、经济学、社会科学、政策制定等领域有广泛的应用。它有助于更好地理解原因和结果之间的关系，以支持更明智的决策制定和问题解决。然而，因果推断需要谨慎处理，因为存在许多潜在的混杂因素和统计偏差，可能会导致不准确的结论。</p>
<p>R语言中实现因果推断的常用方法包括使用不同的包和库，如CausalImpact、MatchIt、Causata、causalforest等。</p>
<ol style="list-style-type: decimal">
<li>CausalImpact:</li>
</ol>
<p>CausalImpact包用于估计因果效应，特别适用于时间序列数据。它基于贝叶斯结构时间序列模型。</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="可解释机器学习与因果推断.html#cb1-1" tabindex="-1"></a><span class="co"># 安装和加载CausalImpact包</span></span>
<span id="cb1-2"><a href="可解释机器学习与因果推断.html#cb1-2" tabindex="-1"></a><span class="co"># install.packages(&quot;CausalImpact&quot;)</span></span>
<span id="cb1-3"><a href="可解释机器学习与因果推断.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(CausalImpact)</span></code></pre></div>
<pre><code>## Loading required package: bsts</code></pre>
<pre><code>## Loading required package: BoomSpikeSlab</code></pre>
<pre><code>## Loading required package: Boom</code></pre>
<pre><code>## 
## Attaching package: &#39;Boom&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     rWishart</code></pre>
<pre><code>## 
## Attaching package: &#39;BoomSpikeSlab&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     knots</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## Loading required package: xts</code></pre>
<pre><code>## 
## Attaching package: &#39;bsts&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:BoomSpikeSlab&#39;:
## 
##     SuggestBurn</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="可解释机器学习与因果推断.html#cb15-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb15-2"><a href="可解释机器学习与因果推断.html#cb15-2" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">arima.sim</span>(<span class="at">model =</span> <span class="fu">list</span>(<span class="at">ar =</span> <span class="fl">0.999</span>), <span class="at">n =</span> <span class="dv">52</span>)</span>
<span id="cb15-3"><a href="可解释机器学习与因果推断.html#cb15-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fl">1.2</span> <span class="sc">*</span> x1 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">52</span>)</span>
<span id="cb15-4"><a href="可解释机器学习与因果推断.html#cb15-4" tabindex="-1"></a>y[<span class="dv">41</span><span class="sc">:</span><span class="dv">52</span>] <span class="ot">&lt;-</span> y[<span class="dv">41</span><span class="sc">:</span><span class="dv">52</span>] <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb15-5"><a href="可解释机器学习与因果推断.html#cb15-5" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(y, x1)</span>
<span id="cb15-6"><a href="可解释机器学习与因果推断.html#cb15-6" tabindex="-1"></a>pre.period <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">40</span>)</span>
<span id="cb15-7"><a href="可解释机器学习与因果推断.html#cb15-7" tabindex="-1"></a>post.period <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">41</span>, <span class="dv">52</span>)</span>
<span id="cb15-8"><a href="可解释机器学习与因果推断.html#cb15-8" tabindex="-1"></a>impact <span class="ot">&lt;-</span> <span class="fu">CausalImpact</span>(data, pre.period, post.period)</span>
<span id="cb15-9"><a href="可解释机器学习与因果推断.html#cb15-9" tabindex="-1"></a>impact</span></code></pre></div>
<pre><code>## Posterior inference {CausalImpact}
## 
##                          Average        Cumulative  
## Actual                   112            1340        
## Prediction (s.d.)        102 (0.4)      1223 (4.8)  
## 95% CI                   [101, 103]     [1214, 1233]
##                                                     
## Absolute effect (s.d.)   9.8 (0.4)      117.1 (4.8) 
## 95% CI                   [8.9, 11]      [107.4, 126]
##                                                     
## Relative effect (s.d.)   9.6% (0.43%)   9.6% (0.43%)
## 95% CI                   [8.7%, 10%]    [8.7%, 10%] 
## 
## Posterior tail-area probability p:   0.001
## Posterior prob. of a causal effect:  99.9%
## 
## For more details, type: summary(impact, &quot;report&quot;)</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="可解释机器学习与因果推断.html#cb17-1" tabindex="-1"></a><span class="co"># Print and plot results</span></span>
<span id="cb17-2"><a href="可解释机器学习与因果推断.html#cb17-2" tabindex="-1"></a><span class="fu">summary</span>(impact)</span></code></pre></div>
<pre><code>## Posterior inference {CausalImpact}
## 
##                          Average        Cumulative  
## Actual                   112            1340        
## Prediction (s.d.)        102 (0.4)      1223 (4.8)  
## 95% CI                   [101, 103]     [1214, 1233]
##                                                     
## Absolute effect (s.d.)   9.8 (0.4)      117.1 (4.8) 
## 95% CI                   [8.9, 11]      [107.4, 126]
##                                                     
## Relative effect (s.d.)   9.6% (0.43%)   9.6% (0.43%)
## 95% CI                   [8.7%, 10%]    [8.7%, 10%] 
## 
## Posterior tail-area probability p:   0.001
## Posterior prob. of a causal effect:  99.9%
## 
## For more details, type: summary(impact, &quot;report&quot;)</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="可解释机器学习与因果推断.html#cb19-1" tabindex="-1"></a><span class="fu">summary</span>(impact, <span class="st">&quot;report&quot;</span>)</span></code></pre></div>
<pre><code>## Analysis report {CausalImpact}
## 
## 
## During the post-intervention period, the response variable had an average value of approx. 111.70. By contrast, in the absence of an intervention, we would have expected an average response of 101.94. The 95% interval of this counterfactual prediction is [101.16, 102.75]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is 9.76 with a 95% interval of [8.95, 10.53]. For a discussion of the significance of this effect, see below.
## 
## Summing up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 1.34K. By contrast, had the intervention not taken place, we would have expected a sum of 1.22K. The 95% interval of this prediction is [1.21K, 1.23K].
## 
## The above results are given in terms of absolute numbers. In relative terms, the response variable showed an increase of +10%. The 95% interval of this percentage is [+9%, +10%].
## 
## This means that the positive effect observed during the intervention period is statistically significant and unlikely to be due to random fluctuations. It should be noted, however, that the question of whether this increase also bears substantive significance can only be answered by comparing the absolute effect (9.76) to the original goal of the underlying intervention.
## 
## The probability of obtaining this effect by chance is very small (Bayesian one-sided tail-area probability p = 0.001). This means the causal effect can be considered statistically significant.</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="可解释机器学习与因果推断.html#cb21-1" tabindex="-1"></a><span class="fu">plot</span>(impact)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="可解释机器学习与因果推断.html#cb22-1" tabindex="-1"></a><span class="fu">plot</span>(impact, <span class="st">&quot;original&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="可解释机器学习与因果推断.html#cb23-1" tabindex="-1"></a><span class="fu">plot</span>(impact<span class="sc">$</span>model<span class="sc">$</span>bsts.model, <span class="st">&quot;coefficients&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>MatchIt:</li>
</ol>
<p>MatchIt包用于进行倾向得分匹配，以减小处理组和对照组之间的混杂性，以进行因果推断。</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="可解释机器学习与因果推断.html#cb24-1" tabindex="-1"></a><span class="co"># 安装和加载MatchIt包</span></span>
<span id="cb24-2"><a href="可解释机器学习与因果推断.html#cb24-2" tabindex="-1"></a><span class="co"># install.packages(&quot;MatchIt&quot;)</span></span>
<span id="cb24-3"><a href="可解释机器学习与因果推断.html#cb24-3" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb24-4"><a href="可解释机器学习与因果推断.html#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="可解释机器学习与因果推断.html#cb24-5" tabindex="-1"></a><span class="co"># 创建倾向得分匹配模型</span></span>
<span id="cb24-6"><a href="可解释机器学习与因果推断.html#cb24-6" tabindex="-1"></a>s.out1 <span class="ot">&lt;-</span> <span class="fu">matchit</span>(treat <span class="sc">~</span> age <span class="sc">+</span> educ <span class="sc">+</span> race <span class="sc">+</span> nodegree <span class="sc">+</span></span>
<span id="cb24-7"><a href="可解释机器学习与因果推断.html#cb24-7" tabindex="-1"></a>                   married <span class="sc">+</span> re74 <span class="sc">+</span> re75, <span class="at">data =</span> lalonde,</span>
<span id="cb24-8"><a href="可解释机器学习与因果推断.html#cb24-8" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">&quot;subclass&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb24-9"><a href="可解释机器学习与因果推断.html#cb24-9" tabindex="-1"></a>                   <span class="at">discard =</span> <span class="st">&quot;control&quot;</span>, <span class="at">subclass =</span> <span class="dv">10</span>)</span>
<span id="cb24-10"><a href="可解释机器学习与因果推断.html#cb24-10" tabindex="-1"></a></span>
<span id="cb24-11"><a href="可解释机器学习与因果推断.html#cb24-11" tabindex="-1"></a>s.out1</span></code></pre></div>
<pre><code>## A matchit object
##  - method: Subclassification (10 subclasses)
##  - distance: Propensity score [common support]
##              - estimated with logistic regression
##  - common support: control units dropped
##  - number of obs.: 614 (original), 557 (matched)
##  - target estimand: ATT
##  - covariates: age, educ, race, nodegree, married, re74, re75</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="可解释机器学习与因果推断.html#cb26-1" tabindex="-1"></a><span class="co"># 进行匹配</span></span>
<span id="cb26-2"><a href="可解释机器学习与因果推断.html#cb26-2" tabindex="-1"></a>matched_data <span class="ot">&lt;-</span> <span class="fu">match.data</span>(s.out1)</span>
<span id="cb26-3"><a href="可解释机器学习与因果推断.html#cb26-3" tabindex="-1"></a><span class="fu">head</span>(matched_data) <span class="co"># 这个数据集就是匹配后的数据集</span></span></code></pre></div>
<pre><code>##      treat age educ   race married nodegree re74 re75       re78  distance
## NSW1     1  37   11  black       1        1    0    0  9930.0460 0.6387699
## NSW2     1  22    9 hispan       0        1    0    0  3595.8940 0.2246342
## NSW3     1  30   12  black       0        0    0    0 24909.4500 0.6782439
## NSW4     1  27   11  black       0        1    0    0  7506.1460 0.7763241
## NSW5     1  33    8  black       0        1    0    0   289.7899 0.7016387
## NSW6     1  22    9  black       0        1    0    0  4056.4940 0.6990699
##      weights subclass
## NSW1       1        5
## NSW2       1        2
## NSW3       1        6
## NSW4       1       10
## NSW5       1        7
## NSW6       1        7</code></pre>
<p>参考:</p>
<ol style="list-style-type: decimal">
<li><a href="https://rpubs.com/liam/Causal_inference" class="uri">https://rpubs.com/liam/Causal_inference</a> 一个简单的介绍</li>
<li><a href="https://rpubs.com/liam/1097043" class="uri">https://rpubs.com/liam/1097043</a> 一个倾向性评分的例子</li>
</ol>
<p>推荐书籍:</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="流程挖掘.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-references.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
